#!/bin/sh


trap 'exit 128' INT
export PATH


main() {
	case $1
	in
		-a | --auto | a | auto )
			emerge -c
			eclean-dist --deep
			eclean-pkg --deep
			;;
		* )
			emerge -ca
			eclean-dist --deep --interactive
			eclean-pkg --deep --interactive
			;;
	esac
}


case $1
in
	-h | --help | help )
		cat <<EOF
Use this to clean up the system (Gentoo)

Usage: epurge [options]

Options:
	auto	don't ask for confirmation
EOF
		exit
		;;
esac


if [ "$(whoami)" != root ]; then
	sudo $0 $1
else
	main $1
fi
