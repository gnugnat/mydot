#!/usr/bin/env bash


# Copyright (c) 2020, XGQT
# Licensed under the ISC License

# Run specified command for each git
# repository found in current dir


trap 'exit 128' INT
export PATH


while read -r -d '' directory; do

    echo "Repo: $(tput bold)$(basename "${directory%/.git}")$(tput sgr0)"

    (
        cd "${directory%.git}" && "$@"
    )

done < <(find . -name .git -print0)
